---
title: "Architecture"
description: "Overview of the Vencura monorepo architecture, including portable-by-default design, application structure, packages, and coding standards."
---

This monorepo follows a modular architecture with clear separation between applications, shared packages, and infrastructure. **Built with portability in mind - deploy anywhere without vendor lock-in.**

## Portable by Default

**Critical architectural principle**: Our stack is designed for portability and runs on any Linux distribution:

- **Default approach**: Avoid vendor-specific features to maintain portability
- **Pragmatic exceptions**: Can leverage vendor features (e.g., Vercel edge functions, optimizations) when scaling/performance needs justify from product/business perspective
- **Platform-agnostic**: Can be deployed to any containerized platform (Docker, Kubernetes, etc.)
- **Vercel as convenience**: Vercel is chosen for rapid deployment and excellent developer experience, not as a requirement
- **All core components** can be migrated to any platform without code changes

**Current Deployment**: All applications (UI + API) are currently deployed on **Vercel**. We are NOT splitting the architecture now - everything stays on Vercel to leverage its unparalleled shipping and distribution capabilities.

## Architecture Structure

This monorepo follows a **4-tier workspace model**:

| Folder | Role |
|--------|------|
| `apps/*` | User-facing products (Next.js, APIs, CLIs, etc) |
| `packages/*` | Shared libraries (types, UI, SDKs, db, contracts) |
| `config/*` | Tooling as code (eslint, tsconfig, biome, tailwind, jest, etc) |
| `_dev/**` | Internal dev tools (infra scripts, fixtures, test harnesses, generators, local tools) |

```
vencura/
├── apps/              # Tier 1: User-facing applications
│   ├── api/           # Elysia backend API (multichain custodial wallet platform)
│   ├── web/           # Next.js frontend for Vencura API (multichain support)
│   ├── docs/          # Documentation site (Fumadocs)
│   └── mathler/       # Next.js Mathler game (Wordle with numbers)
├── packages/          # Tier 2: Shared libraries
│   ├── core/          # TypeScript SDK for Vencura API (contract-first)
│   ├── react/         # React hooks for Vencura API using TanStack Query
│   ├── types/         # Shared API contracts and types (Zod schemas, ts-rest contracts)
│   ├── ui/            # Shared Shadcn/ui component library
│   ├── lib/           # Shared utility library (@vencura/lib)
│   ├── evm/           # EVM token contract ABIs and utilities
│   └── tools/         # Development tools enabled by feature flags
├── config/            # Tier 3: Shared configurations
│   ├── eslint/        # Shared ESLint configuration
│   └── typescript/    # Shared TypeScript configuration
├── contracts/         # Smart contracts (separate area)
│   ├── evm/           # EVM contracts (Foundry)
│   └── solana/        # Solana programs (Anchor)
└── _dev/              # Tier 4: Internal dev tools (reference only)
    ├── infra/         # Pulumi infrastructure for GCP (reference only, not deployed)
    ├── elysia/        # Elysia app template
    └── next/          # Next.js app template
```

**Applications** (`apps/`) are deployable services with their own dependencies and configurations. **Packages** (`packages/`) provide shared code and utilities consumed by applications. **Config** (`config/`) contains shared configuration packages for ESLint, TypeScript, and other tooling. **Internal Dev Tools** (`_dev/`) contains infrastructure scripts, app templates, and other development utilities - nothing in `_dev/` is deployed.

**Note**: GCP Pulumi infrastructure has been moved to `_dev/infra` and is currently **documented but not wired into the default workflow**, which uses Vercel. See [`_dev/README.md`](../../../../_dev/README.md) for details.

<Diagram caption="Monorepo Package Dependencies Flow">
  <div className="grid grid-cols-1 gap-4 p-4 md:grid-cols-2">
    <div className="rounded-lg border border-border bg-background p-4">
      <h3 className="mb-3 font-semibold">Applications Layer</h3>
      <div className="space-y-2 text-sm">
        <div className="rounded bg-muted p-2">apps/api</div>
        <div className="rounded bg-muted p-2">apps/web</div>
        <div className="rounded bg-muted p-2">apps/docs</div>
        <div className="rounded bg-muted p-2">apps/mathler</div>
      </div>
    </div>
    <div className="rounded-lg border border-border bg-background p-4">
      <h3 className="mb-3 font-semibold">Packages Layer</h3>
      <div className="space-y-2 text-sm">
        <div className="rounded bg-muted p-2">@vencura/core</div>
        <div className="rounded bg-muted p-2">@vencura/react</div>
        <div className="rounded bg-muted p-2">@vencura/ui</div>
        <div className="rounded bg-muted p-2">@vencura/lib</div>
        <div className="rounded bg-muted p-2">@vencura/types</div>
      </div>
    </div>
  </div>
  <div className="mt-4 text-center text-sm text-muted-foreground">
    Applications consume packages via workspace dependencies
  </div>
</Diagram>

## Standards & Conventions

This project follows strict coding standards enforced through Cursor rules and documented in Architecture Decision Records (ADRs). See [Architecture Decisions](/docs/adrs) for the complete list of ADRs.

### Key Patterns

- **Mobile-First Design**: All frontend components follow mobile-first responsive design
- **RORO Pattern**: Functions with multiple parameters use Receive Object, Return Object pattern
- **Type Inference**: Always enforce type inference - define return types in functions when needed
- **Functional Code**: Prefer functional and declarative programming patterns

### Cursor Rules

Code standards are defined in `.cursor/rules/` organized by domain:

- **Base**: TypeScript, Environment, General, MCP
- **Frontend**: React, Next.js, React Hooks, Mobile-First, ShadcnUI, Stack, Testing
- **Backend**: Elysia, Testing
- **Web3**: Viem, Wagmi, Solana, Multichain, Solidity, Ponder, Cosmos

See [Cursor Rules](/.cursor/rules/) for detailed patterns and guidelines.

## Projects

### Applications

- **Vencura API** (`apps/api`) - Elysia backend for multichain custodial wallet management
- **Vencura Web** (`apps/web`) - Next.js frontend for Vencura API
- **Documentation Site** (`apps/docs`) - Fumadocs-based documentation site
- **Mathler** (`apps/mathler`) - Next.js Mathler game

### Packages

<ComparisonTable
  headers={['Package', 'Purpose', 'Used By']}
  rows={[
    {
      label: '@vencura/core',
      values: [
        'TypeScript SDK for Vencura API (contract-first)',
        'API, Web, Mathler',
      ],
    },
    {
      label: '@vencura/react',
      values: [
        'React hooks with TanStack Query for Vencura API',
        'Web, Mathler',
      ],
    },
    {
      label: '@vencura/types',
      values: [
        'Shared API contracts and types (Zod schemas, ts-rest contracts)',
        'All apps',
      ],
    },
    {
      label: '@vencura/ui',
      values: ['Shared Shadcn/ui component library', 'Web, Mathler, Docs'],
    },
    {
      label: '@vencura/lib',
      values: [
        'Shared utility library (error handling, async utilities, env validation)',
        'All apps',
      ],
    },
    {
      label: '@vencura/evm',
      values: ['EVM token contract ABIs and utilities', 'API, Web'],
    },
    {
      label: '@vencura/tools',
      values: ['Development tools enabled by feature flags', 'All apps'],
    },
  ]}
  caption="Package overview and usage across applications"
/>

See individual READMEs for detailed documentation on each app and package.

### Contracts

- **EVM Contracts** - Foundry-based test token contracts for EVM chains
- **Solana Contracts** - Anchor-based test token programs for Solana

