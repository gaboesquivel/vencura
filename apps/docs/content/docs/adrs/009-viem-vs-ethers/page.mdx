---
title: "ADR 009: Web3 Library Choice: Ethers.js vs Viem/Wagmi"
description: "We need to select a Web3 library stack for building custodial wallet backend and frontend UIs that interact with blockchain networks, with strong TypeScript support and lightweight bundle size."
---

# ADR 009: Web3 Library Choice: Ethers.js vs Viem/Wagmi

## Context

The project ("Vencura") involves building a custodial wallet backend + frontend UIs that interact with blockchain networks (EVM-compatible). We need a Web3 library stack that supports both backend and frontend operations, including wallet interactions, provider management, smart contract calls, type safety (TypeScript), and seamless integration into our monorepo ecosystem.

Key requirements:

- Lightweight bundle size for frontend UIs (game + demo)
- Strong TypeScript types and modular imports
- Mature tooling for blockchain interactions (contracts, providers, events)
- Compatibility with React/Next.js frontend stack and Node.js backend
- Ease of integration and future extensibility (indexing, event listeners, SDK use)

## Considered Options

### Option A – Ethers.js

A mature and widely used JavaScript/TypeScript library for interacting with Ethereum and EVM chains.

**Pros**

- Very mature, large community and ecosystem
- Extensive documentation, plugins and support
- Works well in Node.js backend and frontend alike

**Cons**

- Larger bundle size in frontend contexts (approx ~130 KB vs smaller alternatives)
- Less "modern modular" import pattern; may include unneeded functionality if not tree-shaken carefully
- Not built specifically for React hooks or frontend wallets out-of-the-box

### Option B – Viem + Wagmi

Viem is a light, modular Web3 library with strong TypeScript support and small bundle size; Wagmi is a React-centric hooks library built on top of Viem.

**Pros**

- Very small bundle size (~27 KB) which is significant for frontend performance
- Modular architecture: import only what you need
- Excellent TypeScript types and modern API design
- Wagmi provides React hooks for wallet/provider state management and fits smoothly into React/Next.js UIs

**Cons**

- Relatively newer compared to Ethers.js — smaller community and ecosystem
- Some advanced "backend indexing" use-cases may need more custom code (where Ethers.js has more third-party support)
- Need to ensure backend usage (Node.js, subscription/event listeners) is well supported

## Decision

We will adopt **Viem + Wagmi** as the primary Web3 library stack for the Vencura project (front-end and back-end).

**Main reasons:**

- The front-ends (UI demo + game) benefit significantly from the smaller bundle size and React-first API of Wagmi
- Viem's modular design aligns with our monorepo shared-components and shared-tooling philosophy
- Excellent TypeScript types and modern API design improve developer experience
- Small bundle size (~27 KB vs ~130 KB) significantly improves frontend performance
- Wagmi's React hooks provide seamless integration with Next.js frontend stack
- For backend use cases, we may still import Ethers.js where needed, but the primary library for new development will be Viem

## Notes

- In the monorepo `packages/` folder create a sub-package: `packages/blockchain-sdk` which exports wrapped functionality built on Viem (and Wagmi for frontend)
- For backend indexing/event tasks, use Viem's provider and contract abstractions; if a use-case arises where Ethers.js plugin support is required, import Ethers.js explicitly in that module
- Ensure bundler (webpack/next) is configured to tree-shake and eliminate unused code from Viem imports
- In frontend apps (`apps/demo`, `apps/game`), import from `packages/blockchain-sdk` so both applications share the same types, hooks, and provider setup
- Document in README: "Web3 interactions use Viem + Wagmi; backend modules may import Ethers.js only if necessary"
