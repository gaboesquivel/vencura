---
alwaysApply: true
---
# TypeScript Rules

## Project Context
- **TypeScript**: v5.9.3 (strict mode)
- **ts-reset**: `@total-typescript/ts-reset` configured globally
- **Module system**: ESM with bundler/Node resolution
- **Monorepo**: Shared packages via `@repo/*` with subpath exports

## Type Declarations
- **Interfaces** for object shapes, **types** for unions/utilities/mapped/Zod inference
- **Avoid enums**: use const objects or union types
- **Infer when possible**: only declare when reusing

## Naming
- **Variables**: camelCase, booleans with aux verbs (`isLoading`, `hasError`, `canEdit`)
- **Directories**: lowercase-with-dashes (`components/auth-wizard`)
- **Exports**: named (exception: Next.js pages/layouts require default)

## Function Patterns
- **RORO**: `({ name, email }: Input) => ({ id, name, email })`
- **Functional**: avoid classes/decorators (exception: framework requirements)
- **Single-line**: `if (!value) return null`, `const double = (x: number) => x * 2`
- **Early returns**: guard clauses, avoid unnecessary `else`

## Imports
- **Type-only**: `import type` for types
- **Subpath exports**: Always use subpaths (`@repo/utils/async`, `@repo/error/nextjs`)
- **Lodash**: `import isEmpty from "lodash-es/isEmpty"` (per-function imports)

## Type Safety
- **Zod-first**: Validate at boundaries (API routes, forms, external APIs)
- **Infer types**: `type User = z.infer<typeof userSchema>`
- **Colocate schemas**: `app/api/users/schema.ts` (feature-specific)
- **Disabled TS ESLint rules**: `no-unsafe-*` disabled for Zod-first validation

## Architecture
- **Explicit return types**: Required for exported functions/API handlers
- **Validation functions**: Return result objects, never throw

## Related
- @.cursor/rules/base/linting.mdc - Linting architecture
- @.cursor/rules/base/error-handling.mdc - Error patterns
