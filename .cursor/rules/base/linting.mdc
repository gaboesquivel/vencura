---
description: Linting architecture and best practices
glob: "*"
alwaysApply: true
---

# Linting

## Architecture Overview
**Hybrid linting architecture**: Biome and ESLint have distinct, non-overlapping responsibilities.

- **Biome**: Formatting, style, basic best practices (fast, modern)
- **ESLint**: Correctness, framework rules, architecture boundaries (ecosystem plugins)
- **No overlap**: All formatting rules disabled in ESLint. Each tool owns its domain completely.

## Tool Responsibilities

### Biome (Primary - Formatting & Style)
- **Formatting**: All code formatting (indentation, quotes, semicolons, etc.)
- **Import Organization**: Import sorting and organization
- **Unused Variables/Imports**: Detection and removal of unused code
- **Style Rules**: Code style preferences (no-var, prefer-const, etc.)
- **React JSX Best Practices**: Basic JSX linting
- **Basic A11y**: Accessibility rules for JSX

### ESLint (Correctness & Framework Rules)
- **TypeScript Correctness**: Basic TypeScript rules (non-type-aware for speed)
- **React/React Hooks Rules**: React-specific correctness rules
- **Next.js Rules**: Next.js framework-specific rules
- **Import Boundary Enforcement**: Architecture rules (e.g., `import/no-default-export`)
- **File Size Limits**: Maximum 300 lines per file (`max-lines`) - helps agents maintain manageable file sizes. Test files (`.test.ts`, `.spec.ts`, `.e2e-spec.ts`, etc.) and UI components (`packages/ui/src/components/**`) are exempt
- **Turbo Monorepo Rules**: Monorepo-aware linting

## Agent Requirements
**CRITICAL**: All agents MUST follow these rules:

1. **Always follow Biome and ESLint rules** - Generated code must comply with both linter rules
2. **Write code that passes linting** - Ensure generated code follows Biome formatting and ESLint correctness rules

## Usage

### Running Linters
```bash
pnpm lint              # Run both linters (recommended for CI)
pnpm lint:biome        # Biome only (formatting + style)
pnpm lint:biome:fix     # Auto-fix
pnpm lint:eslint       # ESLint only (correctness)
pnpm lint:eslint:fix   # Auto-fix
pnpm lint:fix          # Fix all issues (RECOMMENDED after making changes)
pnpm format            # Format code only (Biome)
```

### Agent Workflow
When generating code, agents MUST:

1. **Follow Biome formatting rules** - Use proper indentation, quotes, semicolons, import organization
2. **Follow ESLint correctness rules** - Adhere to TypeScript, React, Next.js, and architecture rules
3. **Write compliant code** - Generate code that would pass both linters without requiring fixes

### Disabling Rules
Use inline comments sparingly and always include a reason:
- **Biome**: `// biome-ignore lint/ruleName: reason`
- **ESLint**: `// eslint-disable-next-line rule-name`
