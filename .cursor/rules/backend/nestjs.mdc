---
description: NestJS backend development standards and patterns
globs: *.ts,**/*module.ts,**/*service.ts,**/*controller.ts
alwaysApply: false
---
# NestJS Rules

## Module Structure
- Organize code by domain/feature modules
- Keep modules focused and single-purpose

## API Design
- Use DTOs with class-validator for input validation
- Document APIs with Swagger/OpenAPI

## Database Access
- Use the repository pattern for database operations
- Use Drizzle or Supabase SDK for database interactions
- Optimize database queries for performance

## Testing
- Use E2E tests for API endpoints (blackbox testing with real APIs)
- Use unit tests for services/controllers (mock only external dependencies)
- All tests use real Dynamic SDK APIs with real API keys (NO MOCKS)
- See [Backend Testing Rules](./testing.mdc) for detailed testing patterns
- Test coverage should include:
  - Wallet creation via Dynamic SDK
  - Balance queries
  - Message signing
  - Transaction sending (may be mocked initially)
  - Error handling and validation
  - User isolation and security